<h2 mat-dialog-title>
  {{ !editar ? 'Detalles Episodio' : 'Actualizar Episodio' }}
</h2>

<mat-dialog-content>
  <form [formGroup]="episodiForm" (ngSubmit)="guardar()">
    <br />
    <mat-form-field appearance="outline" class="example-full-width">
      <mat-label>Data Obertura</mat-label>
      <input
        matInput
        [matDatepicker]="picker"
        formControlName="dataObertura"
        [disabled]="isReadOnly"
        required
      />
      <mat-hint>DD/MM/YYYY</mat-hint>
      <mat-datepicker-toggle
        matIconSuffix
        [for]="picker"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
    </mat-form-field>
    <br />
    <mat-form-field appearance="outline" class="example-full-width">
      <mat-label>Data Tancament</mat-label>
      <input
        matInput
        [matDatepicker]="picker2"
        formControlName="dataTancament"
        [disabled]="isReadOnly"
      />
      <mat-hint>DD/MM/YYYY</mat-hint>
      <mat-datepicker-toggle
        matIconSuffix
        [for]="picker2"
      ></mat-datepicker-toggle>
      <mat-datepicker #picker2></mat-datepicker>
    </mat-form-field>
    <br />
    <mat-form-field appearance="outline">
      <mat-label>Dolencia</mat-label>
      <input
        matInput
        formControlName="motivo"
        [disabled]="isReadOnly"
        required
      />
    </mat-form-field>
    <br />
    <mat-form-field appearance="outline">
      <mat-label>Estat</mat-label>
      <input
        matInput
        formControlName="estat"
        [disabled]="isReadOnly"
        required
      />
    </mat-form-field>
    <br />
    <mat-form-field appearance="outline">
      <mat-label>Urgencia</mat-label>
      <input
        matInput
        formControlName="urgencia"
        [disabled]="isReadOnly"
        required
      />
    </mat-form-field>
    <br/>
    <mat-form-field appearance="outline">
      <mat-label>Recepta</mat-label>
      <input
        matInput
        formControlName="recepta"
        [disabled]="isReadOnly"
        required
      />
    </mat-form-field>
    <br/>

    <mat-form-field appearance="outline">
      <mat-label>DNI Pacient</mat-label>
      <input
        matInput
        formControlName="dniPacient"
        [disabled]="isReadOnly"
        required
      />
    </mat-form-field>
    <br />
    <mat-form-field appearance="outline">
      <mat-label>DNI Metge</mat-label>
      <input
        matInput
        formControlName="dniMetge"
        [disabled]="isReadOnly"
        required
      />
    </mat-form-field>
    <br/>
  </form>
</mat-dialog-content>

<mat-dialog-actions>
  <!-- Botón "Editar" aparece solo si no estamos en modo de edición -->
  <button mat-button *ngIf="!editar" (click)="enableEditing()">Editar</button>

  <!-- Botón "Guardar" aparece solo si estamos en modo de edición -->
  <button
    mat-raised-button
    color="primary"
    *ngIf="editar"
    [disabled]="episodiForm.invalid"
    (click)="guardar()"
  >
    Guardar
  </button>

  <!-- Botón "Cancelar" siempre disponible -->
  <button mat-button mat-dialog-close>Cancelar</button>
</mat-dialog-actions>

