<app-administratidor-sistema-dashboard></app-administratidor-sistema-dashboard>
<div class="camas-section">
  <h2>Consultas</h2>
  <app-snackbar #snackbar></app-snackbar>

  <!-- 
    <th>ID Paciente</th> 
    <th>Motivo</th>
    <th>Estado</th>
  -->

  <div class="header-container">
    <div>
      <button
        mat-raised-button
        class="demo-button"
        (click)="toggleFormularioAgregar()"
      >
        Agregar Consulta
      </button>
    </div>

    <div>
      <app-search-box
        [searchOptions]="[
          { label: 'Codigo de Consulta', value: 'id' },
          { label: 'Urgencia', value: 'urgencia' },
          { label: 'Sintomatologia', value: 'sintomatologia' },
          { label: 'Receta', value: 'receta' },
          { label: 'Dni Personal', value: 'dniPersonal' }
        ]"
        [defaultSearchType]="'id'"
        placeholder="Escribe para buscar..."
        (search)="filtrarConsultas($event)"
      >
      </app-search-box>
    </div>
  </div>

  <div class="table-container mat-elevation-z8">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8">
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef>Id</th>
        <td
          mat-cell
          *matCellDef="let consulta"
          (click)="toggleActualizarConsulta(consulta)"
        >
          {{ consulta.id }}
        </td>
      </ng-container>

      <ng-container matColumnDef="urgencia">
        <th mat-header-cell *matHeaderCellDef>Urgencia</th>
        <td
          mat-cell
          *matCellDef="let consulta"
          (click)="toggleActualizarConsulta(consulta)"
        >
          {{ consulta.urgencia ? 'Si' : 'No' }}
        </td>
      </ng-container>

      <ng-container matColumnDef="sintomatologia">
        <th mat-header-cell *matHeaderCellDef>Sintomatologia</th>
        <td
          mat-cell
          *matCellDef="let consulta"
          (click)="toggleActualizarConsulta(consulta)"
        >
          {{ consulta.sintomatologia }}
        </td>
      </ng-container>

      <ng-container matColumnDef="receta">
        <th mat-header-cell *matHeaderCellDef>Receta</th>
        <td
          mat-cell
          *matCellDef="let consulta"
          (click)="toggleActualizarConsulta(consulta)"
        >
          {{ consulta.recepta }}
        </td>
      </ng-container>

      <ng-container matColumnDef="dniPersonal">
        <th mat-header-cell *matHeaderCellDef>Dni Personal</th>
        <td
          mat-cell
          *matCellDef="let consulta"
          (click)="toggleActualizarConsulta(consulta)"
        >
          {{ consulta.dniPersonal }}
        </td>
      </ng-container>

      <ng-container matColumnDef="episodiMedicId">
        <th mat-header-cell *matHeaderCellDef>Id E.M.</th>
        <td
          mat-cell
          *matCellDef="let consulta"
          (click)="toggleActualizarConsulta(consulta)"
        >
          {{ consulta.episodiMedicId }}
        </td>
      </ng-container>

      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef>Acciones</th>

        <td mat-cell *matCellDef="let consulta" id="accions">
          <button mat-button color="warn" (click)="borrarConsulta(consulta.id)">
            Eliminar
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        class="clickable-row"
      ></tr>
    </table>
  </div>

  <mat-paginator
    [pageSizeOptions]="[5, 10]"
    showFirstLastButtons
  ></mat-paginator>
</div>
