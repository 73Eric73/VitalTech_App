<app-nav></app-nav>

<div class="container">
    <h2>Formulario de registro de pacientes</h2>
    
    <form type="submit" [formGroup]="pacientForm" (ngSubmit)="onSubmit()">
        <div class= "identificador">
            
            <div class = "capzalera4">
                <label for="dni">DNI:</label> 
                <input type="text" id="dni" ngModel name="dni" formControlName="dni" required
                [ngClass]="{'is-invalid': pacientForm.get('dni')?.touched && pacientForm.get('dni')?.invalid || 
                    pacientForm.hasError('dniLletraIncorrect')}">
                    <div class ="error-messages" *ngIf="pacientForm.get('dni')?.touched && pacientForm.get('dni')?.invalid">
                        <small *ngIf="pacientForm.get('dni')?.hasError('required')">Este campo es obligatorio</small>
                        <small *ngIf="pacientForm.get('dni')?.hasError('minlength')">Mínimo 9 carácteres</small>
                        <small *ngIf="pacientForm.get('dni')?.hasError('pattern')">Construido por 8 núm y una letra</small>
                        <small *ngIf="pacientForm.get('dni')?.hasError('pacientIdExistes')">El DNI ya existe</small>
                    </div>
            </div>

            <div class = "masInfo">
                <div class="capzalera1">
                    <label for="SS">Número de la SS:</label>
                    <input type="text" id="SS" ngModel name="SS" formControlName = "numSS" required
                    [ngClass]="{'is-invalid': pacientForm.get('numSS')?.touched && pacientForm.get('numSS')?.invalid}">
                    <div class ="error-messages" *ngIf="pacientForm.get('numSS')?.touched && pacientForm.get('numSS')?.invalid">
                        <small *ngIf="pacientForm.get('numSS')?.hasError('required')">Este campo es obligatorio</small>
                        <small *ngIf="pacientForm.get('numSS')?.hasError('minlength')">Mínimo 10 carácteres</small>
                        <small *ngIf="pacientForm.get('numSS')?.hasError('pattern')">Construido por 10 números</small>
                    </div>
                </div>
            </div>

            <div class = "capzalera1">
                <label for="name">Nombre:</label>
                <input type="text" id="name" ngModel name="name" formControlName="nom" required>
            </div>

            <div class = "capzalera1">
                <label for="sexo">Sexo:</label>
                <select id="selecionSexe" ngModel name="selecionSexe" formControlName="sexe">
                    <option value="F">Femenino</option>
                    <option value="M">Masculino</option>
                </select>
            </div>
        </div>
        <div *ngIf="pacientForm.hasError('dniLletraIncorrect')" class="error-messages">
            <small>DNI invalido</small>
        </div>
        <button type="submit">Registrar</button>
    </form>
</div>